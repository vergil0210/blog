(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{548:function(_,v,t){"use strict";t.r(v);var r=t(6),i=Object(r.a)({},(function(){var _=this,v=_.$createElement,t=_._self._c||v;return t("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[t("h2",{attrs:{id:"为什么使用证书"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#为什么使用证书"}},[_._v("#")]),_._v(" 为什么使用证书")]),_._v(" "),t("p",[_._v("在证书出现之前，人们使用公钥算法保证信息安全。任何参与者都可以给其他参与者发送自己的公钥，这种方法很方便但是存在一个缺点。任何人都可以伪造公用通告，这是很致命的。")]),_._v(" "),t("p",[_._v("我们把公钥加密当做一个身份验证，这个身份验证不用经过任何权威机构的认证，而是由用户自身所生成。在这种情况下，任何人都可以伪装成你。")]),_._v(" "),t("p",[_._v("为了解决这个问题，公钥证书出现了。公钥证书由"),t("strong",[_._v("公钥")]),_._v("、"),t("strong",[_._v("公钥所有者的用户ID")]),_._v("、"),t("strong",[_._v("可信的第三方签名的整个数据块")]),_._v("组成。如今人们广泛接受的公钥证书格式是X.509标准，以下对其进行探讨。")]),_._v(" "),t("h2",{attrs:{id:"x-509证书"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#x-509证书"}},[_._v("#")]),_._v(" X.509证书")]),_._v(" "),t("h3",{attrs:{id:"证书结构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#证书结构"}},[_._v("#")]),_._v(" 证书结构")]),_._v(" "),t("ul",[t("li",[_._v("版本号")]),_._v(" "),t("li",[_._v("序列号")]),_._v(" "),t("li",[_._v("签名算法标识符\n"),t("ul",[t("li",[_._v("算法")]),_._v(" "),t("li",[_._v("参数")])])]),_._v(" "),t("li",[_._v("发放者名称")]),_._v(" "),t("li",[_._v("证书有效期\n"),t("ul",[t("li",[_._v("生效日期")]),_._v(" "),t("li",[_._v("失效日期")])])]),_._v(" "),t("li",[_._v("主体名称")]),_._v(" "),t("li",[_._v("主体公钥信息\n"),t("ul",[t("li",[_._v("公钥算法")]),_._v(" "),t("li",[_._v("参数")]),_._v(" "),t("li",[_._v("主体公钥")])])]),_._v(" "),t("li",[_._v("颁发者唯一标识符（可选项）")]),_._v(" "),t("li",[_._v("主体唯一标识符（可选项）")]),_._v(" "),t("li",[_._v("扩展信息（可选项）")]),_._v(" "),t("li",[_._v("证书签名算法")]),_._v(" "),t("li",[_._v("签名\n"),t("ul",[t("li",[_._v("算法")]),_._v(" "),t("li",[_._v("参数")]),_._v(" "),t("li",[_._v("加密后的内容")])])])]),_._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"title"}),t("p",[_._v("CA用它的"),t("strong",[_._v("私钥")]),_._v("对证书中内容进行签名，如果用户知道相应的公钥，那该用户就可以验证由CA签名过的证书是否合法，这是一个典型的数字签名方法。")])]),t("h3",{attrs:{id:"特征及作用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#特征及作用"}},[_._v("#")]),_._v(" 特征及作用")]),_._v(" "),t("p",[t("strong",[_._v("由CA生成的用户证书有如下特征")]),_._v("：")]),_._v(" "),t("ul",[t("li",[t("p",[_._v("任何可以访问CA公钥的用户都可以验证此经过签名的用户公钥（关于数字签名的理解可以点击"),t("a",{attrs:{href:"http://www.youdzone.com/signature.html",target:"_blank",rel:"noopener noreferrer"}},[_._v("这里"),t("OutboundLink")],1),_._v("）")])]),_._v(" "),t("li",[t("p",[_._v("只有认证中心才可以修改用户证书而不被发现")])])]),_._v(" "),t("p",[_._v("因此，在加密算法安全的前提下，一旦B拥有了A的证书，B就可以确保：")]),_._v(" "),t("ul",[t("li",[t("strong",[_._v("他用A的公钥加密的消息是不能被前厅的")]),_._v(" （B从证书中取得A的公钥，而证书做过了数字签名）")]),_._v(" "),t("li",[t("strong",[_._v("他收到的用A的私钥签名的信息是不能被伪造的")]),_._v(" （B拥有正确的公钥，可以对A的签名进行验证）")])]),_._v(" "),t("h3",{attrs:{id:"证书链"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#证书链"}},[_._v("#")]),_._v(" 证书链")]),_._v(" "),t("p",[_._v("由于用户数量很庞大，让一个用户预订统一的CA是不太现实的，所以引入了证书链的概念。")]),_._v(" "),t("p",[_._v("定义："),t("strong",[_._v("信任链")]),_._v("，或称"),t("strong",[_._v("数字证书链")]),_._v("，是一连串的"),t("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E9%9B%BB%E5%AD%90%E8%AD%89%E6%9B%B8",target:"_blank",rel:"noopener noreferrer"}},[_._v("数字证书"),t("OutboundLink")],1),_._v("，由"),t("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E6%A0%B9%E8%AF%81%E4%B9%A6",target:"_blank",rel:"noopener noreferrer"}},[_._v("根证书"),t("OutboundLink")],1),_._v("为起点，透过"),t("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E4%BC%A0%E9%80%92%E5%85%B3%E7%B3%BB",target:"_blank",rel:"noopener noreferrer"}},[_._v("层层信任"),t("OutboundLink")],1),_._v("["),t("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E4%BF%A1%E4%BB%BB%E9%8F%88#cite_note-1",target:"_blank",rel:"noopener noreferrer"}},[_._v("1]"),t("OutboundLink")],1),_._v("，使"),t("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E5%85%AC%E9%96%8B%E9%87%91%E9%91%B0%E8%AA%8D%E8%AD%89#%E7%B5%82%E7%AB%AF%E5%AF%A6%E9%AB%94%E8%AD%89%E6%9B%B8",target:"_blank",rel:"noopener noreferrer"}},[_._v("终端实体证书"),t("OutboundLink")],1),_._v("的持有者可以获得转授的信任["),t("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E4%BF%A1%E4%BB%BB%E9%8F%88#cite_note-2",target:"_blank",rel:"noopener noreferrer"}},[_._v("2]"),t("OutboundLink")],1),_._v("，"),t("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E8%BA%AB%E5%88%86%E6%A0%87%E8%AF%86%E6%96%B9%E5%BC%8F",target:"_blank",rel:"noopener noreferrer"}},[_._v("以证明身份"),t("OutboundLink")],1),_._v("。（来源：wiki百科）")]),_._v(" "),t("p",[_._v("举个例子：")]),_._v(" "),t("p",[_._v("​\t存在两个认证中心X"),t("sub",[_._v("1")]),_._v("、X"),t("sub",[_._v("2")]),_._v("分别对两个用户A、B发送了证书，此时如果B向A发送由X"),t("sub",[_._v("2")]),_._v("下发的证书给A时，其实对A来说是没有意义的。"),t("strong",[_._v("因为A并不信任X"),t("sub",[_._v("2")]),_._v("且没有X"),t("sub",[_._v("2")]),_._v("的公钥")]),_._v("，A可以读取B的证书，但无法验证签名。但是如果两个CA之间已经安全的交换了他们的公钥，那么就可以使A信任B的公钥。")]),_._v(" "),t("p",[_._v("![证书链示意图](../img/certificate chain.png)")]),_._v(" "),t("p",[_._v("下面叙述了A信任B的公钥的过程：")]),_._v(" "),t("ol",[t("li",[_._v("A从目录中得到X"),t("sub",[_._v("1")]),_._v("签名的X"),t("sub",[_._v("2")]),_._v("的证书，由于A知道X"),t("sub",[_._v("1")]),_._v("的公钥，所以A此时可以拿到X"),t("sub",[_._v("2")]),_._v("的公钥，并通过X"),t("sub",[_._v("1")]),_._v("的签名验证它")]),_._v(" "),t("li",[_._v("由于此时A已经可以信任X"),t("sub",[_._v("2")]),_._v("，并拥有其公钥副本，所以此时A可以对B的签名进行验证并安全得到他的公钥。")])]),_._v(" "),t("p",[_._v("使用X.509表示法，这个证书链可以这样表示：X"),t("sub",[_._v("1")]),_._v("<<X"),t("sub",[_._v("2")]),_._v(">>X"),t("sub",[_._v("2")]),_._v("<<\\B>>。")]),_._v(" "),t("p",[_._v("同样的，如果B可以通过反向链X"),t("sub",[_._v("2")]),_._v("<<X"),t("sub",[_._v("1")]),_._v(">>X"),t("sub",[_._v("1")]),_._v("<<\\A>>得到A的公钥。")]),_._v(" "),t("p",[_._v("这种方案不必局限于两个证书组成，任意长度的CA路径都可以用类似的方法产生一个链。")]),_._v(" "),t("p",[_._v("一个拥有N个要素的链可以如下表述：X"),t("sub",[_._v("1")]),_._v("<<X"),t("sub",[_._v("2")]),_._v(">>X"),t("sub",[_._v("2")]),_._v("<<X"),t("sub",[_._v("3")]),_._v(">>·····X"),t("sub",[_._v("N")]),_._v("<<\\B>>,这种情况下CA链中的每一对都必须互相生成过证书，每个CA的目录口X都包含如下两种类型的证书：")]),_._v(" "),t("ul",[t("li",[_._v("前向证书：由其他CA生成的X的证书")]),_._v(" "),t("li",[_._v("反向证书：由X生成的其他CA的证书")])]),_._v(" "),t("h3",{attrs:{id:"证书撤销"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#证书撤销"}},[_._v("#")]),_._v(" 证书撤销")]),_._v(" "),t("p",[_._v("每个证书都包含一个有效期，正常情况下新证书恰好在老证书过期前发放。由于以下原因之一，有时会希望在证书过期前就将其撤销。")]),_._v(" "),t("ul",[t("li",[_._v("用户的私钥被认为已泄露")]),_._v(" "),t("li",[_._v("用户不再被CA信任")]),_._v(" "),t("li",[_._v("CA的证书被认为已泄露")])]),_._v(" "),t("p",[_._v("每个CA都必须存储一个包含其发放的所有"),t("strong",[_._v("未到期而被撤销的证书列表")]),_._v("，这既包括给用户发放的证书，也包括给其他CA发放的证书。")]),_._v(" "),t("p",[_._v("撤销证书列表结构：")]),_._v(" "),t("ul",[t("li",[t("p",[_._v("签名算法标识符")])]),_._v(" "),t("li",[t("p",[_._v("发放者的名称")])]),_._v(" "),t("li",[t("p",[_._v("此次更新日期")])]),_._v(" "),t("li",[t("p",[_._v("下一个CRL计划发放日期")])]),_._v(" "),t("li",[t("p",[_._v("已撤销的证书")]),_._v(" "),t("ul",[t("li",[_._v("用户证书序列号")]),_._v(" "),t("li",[_._v("撤销日期")])])]),_._v(" "),t("li",[t("p",[_._v("签名")])])]),_._v(" "),t("p",[_._v("用户得到证书时，必须要确定证书是否被撤销。")]),_._v(" "),t("p",[_._v("注：本篇文章为 网络安全基础-应用与标准（第六版）的学习笔记。")])])}),[],!1,null,null,null);v.default=i.exports}}]);